<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para o meu amor ‚ù§Ô∏è</title>
    <style>
        body {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100vh; background-color: #ffe6e6; font-family: 'Comic Sans MS', cursive;
            overflow: hidden; text-align: center; margin: 0;
        }
        h1, h2 { color: #d63384; z-index: 1; padding: 0 20px; }
        .section { display: none; flex-direction: column; align-items: center; width: 100%; }
        .active { display: flex; }

        .buttons { 
            display: flex; justify-content: center; align-items: center; 
            gap: 20px; margin-top: 20px; width: 100%; height: 150px; position: relative;
        }

        button {
            padding: 15px 30px; font-size: 18px; cursor: pointer; border: none;
            border-radius: 50px; transition: 0.3s; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 2;
        }

        .btn-pink { background-color: #ff85a2; color: white; }
        .btn-green { background-color: #4caf50; color: white; }
        .btn-red { background-color: #f44336; color: white; }

        #contador {
            display: none; margin-top: 20px; font-size: 1.1rem; color: #d63384;
            background: rgba(255, 255, 255, 0.6); padding: 15px; border-radius: 20px;
        }

        .timer-unit { font-weight: bold; font-size: 1.3rem; }
        .heart { position: fixed; color: #ff4d4d; animation: fall linear forwards; z-index: 0; }
        @keyframes fall { to { transform: translateY(100vh) rotate(360deg); opacity: 0; } }
        
        img { max-width: 250px; border-radius: 15px; margin-bottom: 10px; }
        #redeemBtn { position: relative; transition: 0.2s ease-out; }
    </style>
</head>
<body>

    <div id="sec-capa" class="section active">
        <h1>Tenho um desafio para ti... ‚ù§Ô∏è</h1>
        <img src="https://i.giphy.com/media/v1.Y2lkPTc5MGI3NjExOHpndW54amZndm96eXp6eXp6eXp6eXp6eXp6eXp6eXp6eCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/cLS1cfxvGOPVpf9g3y/giphy.gif">
        <p>Est√°s preparada para o Teste de Aptid√£o de Namorada?</p>
        <button class="btn-pink" onclick="showSec('sec-quiz')">Estou pronta! üöÄ</button>
    </div>

    <div id="sec-quiz" class="section">
        <h2 id="quiz-title">Pergunta 1/10</h2>
        <h1 id="quiz-text">Quem manda na rela√ß√£o?</h1>
        <div id="quiz-media"></div>
        <div class="buttons" id="quiz-btns"></div>
    </div>

    <div id="sec-redeem" class="section">
        <h1>Teste Conclu√≠do! Acertaste TUDO! üéâ</h1>
        <img id="redeemGif" src="https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExazR5c2xzOGJjdzI4bHIyYmg2NGU1b2Uyc3lmNzlianlwYzR1a3hkaSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/IwAZ6dvvvaTtdI8SD5/giphy.gif">
        <div id="redeemArea" style="height: 150px; width: 100%; display: flex; justify-content: center; align-items: center;">
            <button id="redeemBtn" class="btn-green" onclick="handleRedeem()">REDEEM YOUR PRIZE üéÅ</button>
        </div>
    </div>

    <div id="sec-vale" class="section">
        <h1>Surpresa! üë¢</h1>
        <div style="background: white; padding: 20px; border-radius: 20px; border: 3px dashed #d63384; max-width: 80%;">
            <h2>Vale 1 par de botas</h2>
            <p>"V√°lido para o resto das nossas vidas" ‚ù§Ô∏è</p>
        </div>
        <p style="margin-top: 20px;">Est√°s pronta para a pergunta final?</p>
        <button class="btn-pink" onclick="showSec('sec-final')">SIM, DESPACHA-TE!</button>
    </div>

    <div id="sec-final" class="section">
        <h1 id="final-question">Queres ser a minha Valentine? ‚ù§Ô∏è</h1>
        <img id="final-gif" src="https://i.giphy.com/media/cLS1cfxvGOPVpf9g3y/giphy.gif">
        <div class="buttons" id="final-btns">
            <button id="yesBtn" class="btn-green" onclick="accepted()">SIM</button>
            <button id="noBtn" class="btn-red" onclick="moveNoButton()">N√ÉO</button>
        </div>
        <div id="contador">
            <p>J√° estamos juntos h√°:</p>
            <div id="timer"></div>
        </div>
    </div>

    <audio id="musica" src="https://www.myinstants.com/media/sounds/careless-whisper-chorus.mp3"></audio>

    <script>
        let currentStep = 1;
        let quizSubStep = 0;
        let fleeCount = 0;

        function showSec(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(id === 'sec-quiz') renderQuiz();
        }

        function renderQuiz() {
            const title = document.getElementById('quiz-title');
            const text = document.getElementById('quiz-text');
            const btns = document.getElementById('quiz-btns');
            const media = document.getElementById('quiz-media');
            btns.innerHTML = ''; media.innerHTML = '';

            switch(currentStep) {
                case 1:
                    title.innerText = "Pergunta 1/10";
                    text.innerText = quizSubStep === 0 ? "Quem manda na rela√ß√£o?" : (quizSubStep === 1 ? "Mentira..." : "Obviamente tu!");
                    createBtn(quizSubStep === 0 ? "Eu" : "Continuar", () => {
                        if(quizSubStep < 2) { quizSubStep++; renderQuiz(); }
                        else nextQ();
                    });
                    break;
                case 2:
                    title.innerText = "Pergunta 2/10";
                    text.innerText = quizSubStep === 0 ? "O que fazer quando tenho fome?" : "ERRAADO! Tenho de correr pela vida porque s√≥ tenho 5 min para te dar comida!";
                    createBtn("Dar comida em 5 min", () => { quizSubStep = 1; renderQuiz(); });
                    createBtn("Correr pela vida", () => { quizSubStep = 1; renderQuiz(); });
                    if(quizSubStep === 1) { btns.innerHTML = ''; createBtn("Entendido ü´°", nextQ); }
                    break;
                case 3:
                    title.innerText = "Pergunta 3/10";
                    text.innerText = "Quem demora mais a arranjar-se?";
                    createBtn(quizSubStep === 0 ? "Tu" : "Tu, mas eu espero", () => {
                        if(quizSubStep === 0) { quizSubStep = 1; renderQuiz(); }
                        else nextQ();
                    });
                    break;
                case 4:
                    title.innerText = "Pergunta 4/10";
                    const p4Texts = ["Roubar batatas do meu prato √©...", "Tens a certeza?", "Mesmo mesmo mesmo?", "Joking... claro que podes tirar se eu n√£o comer primeiro!"];
                    text.innerText = p4Texts[quizSubStep];
                    let label = (quizSubStep === 3) ? "Muito bem ‚ù§Ô∏è" : "Crime";
                    createBtn(label, () => { 
                        if(quizSubStep < 3) { quizSubStep++; renderQuiz(); } 
                        else nextQ(); 
                    });
                    if(quizSubStep === 0) createBtn("Direito teu ‚ù§Ô∏è", nextQ);
                    break;
                case 5:
                    title.innerText = "Pergunta 5/10";
                    text.innerText = quizSubStep === 0 ? "Quem √© o Ladr√£o de Cobertores?" : "Eu sei que eras incapaz, obviamente √© um monstro!";
                    createBtn("Um monstro", () => { quizSubStep = 1; renderQuiz(); });
                    createBtn("Tu, todas as noites", () => { quizSubStep = 1; renderQuiz(); });
                    if(quizSubStep === 1) { btns.innerHTML = ''; createBtn("Pois √© üòá", nextQ); }
                    break;
                case 6:
                    title.innerText = "Pergunta 6/10 (Easter Egg!)";
                    text.innerText = quizSubStep === 0 ? "Quantas fotos at√© estares 'Instagram√°vel'?" : "N√£o reparaste em nada? ‚ù§Ô∏è";
                    if(quizSubStep === 1) text.innerHTML += "<br><span style='font-size:40px'>19 / 08 / 2024</span>";
                    
                    // Bot√£o Correto: 19082024
                    const btnDate = document.createElement('button');
                    btnDate.className = 'btn-pink';
                    btnDate.innerText = quizSubStep === 0 ? "19082024 fotos" : "Continuar";
                    btnDate.onclick = () => { 
                        if(quizSubStep === 0) { quizSubStep = 1; renderQuiz(); } 
                        else nextQ(); 
                    };
                    btns.appendChild(btnDate);

                    // Bot√£o Est√°tico: N√£o faz nada (apenas para confundir)
                    if(quizSubStep === 0) {
                        const btnStatic = document.createElement('button');
                        btnStatic.className = 'btn-red';
                        btnStatic.innerText = "At√© o telem√≥vel ficar sem bateria";
                        btnStatic.onclick = () => { /* N√£o faz nada */ };
                        btns.appendChild(btnStatic);
                    }
                    break;
                case 7:
                    title.innerText = "Pergunta 7/10";
                    text.innerText = "Se eu fosse uma minhoca...";
                    if(quizSubStep === 1) {
                        text.innerText = "Tu √©s mesmo m√°! ü•∫";
                        media.innerHTML = '<img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExOHpndW54amZndm96eXp6eXp6eXp6eXp6eXp6eXp6eXp6eCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/v98L8wALXpS6Y/giphy.gif">';
                    }
                    if(quizSubStep === 2) text.innerText = "Acho bem! ü•∞";
                    if(quizSubStep === 0) {
                        createBtn("Pisavas-me", () => { quizSubStep = 1; renderQuiz(); });
                        createBtn("Davas-me mimos", () => { quizSubStep = 2; renderQuiz(); });
                    } else createBtn("Continuar", nextQ);
                    break;
                case 8:
                    title.innerText = "Pergunta 8/10";
                    text.innerText = quizSubStep === 0 ? "Qual √© o meu melhor atributo?" : "Paci√™ncia de santo + O meu rabo (Combo Perfeito)";
                    createBtn("Paci√™ncia de santo", () => { quizSubStep = 1; renderQuiz(); });
                    createBtn("O meu rabo", () => { quizSubStep = 1; renderQuiz(); });
                    if(quizSubStep === 1) { btns.innerHTML = ''; createBtn("Concordo plenamente", nextQ); }
                    break;
                case 9:
                    title.innerText = "Pergunta 9/10";
                    text.innerText = "Onde vamos jantar hoje?";
                    for(let i=0; i<4; i++) createBtn("McDonalds", nextQ);
                    break;
                case 10:
                    title.innerText = "Pergunta 10/10";
                    text.innerText = "Est√°s pronta para a pergunta final?";
                    createBtn("Sim!", () => showSec('sec-redeem'));
                    createBtn("Sim, por favor!", () => showSec('sec-redeem'));
                    break;
            }
        }

        function createBtn(txt, fn) {
            const b = document.createElement('button');
            b.className = 'btn-pink'; b.innerText = txt; b.onclick = fn;
            document.getElementById('quiz-btns').appendChild(b);
        }

        function nextQ() { currentStep++; quizSubStep = 0; renderQuiz(); }

        function handleRedeem() {
            const btn = document.getElementById('redeemBtn');
            const gif = document.getElementById('redeemGif');
            if(fleeCount < 20) {
                const rect = gif.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                const angle = Math.random() * 2 * Math.PI;
                const radius = 120 + Math.random() * 80;
                const newX = centerX + Math.cos(angle) * radius - (btn.offsetWidth / 2);
                const newY = centerY + Math.sin(angle) * radius - (btn.offsetHeight / 2);
                const safeX = Math.max(20, Math.min(newX, window.innerWidth - btn.offsetWidth - 20));
                const safeY = Math.max(20, Math.min(newY, window.innerHeight - btn.offsetHeight - 20));
                btn.style.position = 'fixed';
                btn.style.left = safeX + 'px';
                btn.style.top = safeY + 'px';
                fleeCount++;
            } else {
                btn.innerText = "OK, J√Å CHEGA! VER PR√âMIO";
                btn.style.position = 'relative';
                btn.style.left = '0'; btn.style.top = '0';
                btn.onclick = () => showSec('sec-vale');
            }
        }

        let noCount = 0;
        function moveNoButton() {
            const noBtn = document.getElementById('noBtn');
            const yesBtn = document.getElementById('yesBtn');
            noBtn.style.position = 'fixed';
            const yesRect = yesBtn.getBoundingClientRect();
            const angle = noCount * 0.8; 
            const radius = 150 + noCount * 5;
            const x = yesRect.left + yesRect.width/2 + Math.cos(angle) * radius - 50;
            const y = yesRect.top + yesRect.height/2 + Math.sin(angle) * radius - 25;
            noBtn.style.left = x + 'px';
            noBtn.style.top = y + 'px';
            const phrases = ["N√£o", "Certeza?", "Pensa bem", "Noop", "Tenta outra vez", "Diz que sim ‚ù§Ô∏è"];
            noBtn.innerText = phrases[noCount % phrases.length];
            noCount++;
            yesBtn.style.transform = `scale(${1 + noCount * 0.1})`;
        }

        function accepted() {
            document.getElementById('final-question').innerText = "S√°bia decis√£o! ‚ù§Ô∏è Agora n√£o h√° devolu√ß√µes!";
            document.getElementById('final-gif').src = "https://i.giphy.com/media/KztT2c4u8mYYUiCiZ7/giphy.gif";
            document.getElementById('final-btns').style.display = 'none';
            document.getElementById('contador').style.display = 'block';
            document.getElementById('musica').play();
            setInterval(updateTimer, 1000);
            setInterval(createHeart, 150);
        }

        function updateTimer() {
            const diff = new Date() - new Date('2024-08-19T00:00:00');
            const d = Math.floor(diff / 86400000);
            const h = Math.floor((diff / 3600000) % 24);
            const m = Math.floor((diff / 60000) % 60);
            const s = Math.floor((diff / 1000) % 60);
            document.getElementById('timer').innerHTML = `${d} dias, ${h}h, ${m}m e ${s}s`;
        }

        function createHeart() {
            const h = document.createElement('div');
            h.className = 'heart'; h.innerHTML = '‚ù§Ô∏è';
            h.style.left = Math.random() * 100 + 'vw';
            h.style.top = '-20px';
            h.style.fontSize = (Math.random() * 20 + 10) + 'px';
            h.style.animationDuration = (Math.random() * 2 + 3) + 's';
            document.body.appendChild(h);
            setTimeout(() => h.remove(), 5000);
        }
    </script>
</body>
</html>
